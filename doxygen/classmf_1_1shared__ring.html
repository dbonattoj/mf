<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>mf: mf::shared_ring Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">mf
   </div>
   <div id="projectbrief">Media Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemf.html">mf</a></li><li class="navelem"><a class="el" href="classmf_1_1shared__ring.html">shared_ring</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmf_1_1shared__ring-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mf::shared_ring Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Timed ring buffer with changed semantics, for dual-thread use.  
 <a href="classmf_1_1shared__ring.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="shared__ring_8h_source.html">shared_ring.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for mf::shared_ring:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmf_1_1shared__ring.png" usemap="#mf::shared_ring_map" alt=""/>
  <map id="mf::shared_ring_map" name="mf::shared_ring_map">
<area href="classmf_1_1ndarray__shared__ring.html" title="Shared ring wrapper with concrete frame type. " alt="mf::ndarray_shared_ring&lt; Frame_dim, Elem &gt;" shape="rect" coords="0,56,273,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a9b77e989ccd055ec19eb0a3b5f65de4d"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a9b77e989ccd055ec19eb0a3b5f65de4d">section_view_type</a> = <a class="el" href="classmf_1_1timed__ring.html#affa5b146c4b4100f18c9b684686c1a47">timed_ring::section_view_type</a></td></tr>
<tr class="separator:a9b77e989ccd055ec19eb0a3b5f65de4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac185295e24497ff233d58d49c955c5b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#ac185295e24497ff233d58d49c955c5b3">shared_ring</a> (const <a class="el" href="namespacemf.html#ad2056866238211e432bebeb2ebed1fc7">frame_array_properties</a> &amp;, bool seekable, <a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> <a class="el" href="classmf_1_1shared__ring.html#ab0de07bea633fd9b14e0a74313b01282">end_time</a>=-1)</td></tr>
<tr class="separator:ac185295e24497ff233d58d49c955c5b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70a698614e2f125efdeb66fef9926c91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a70a698614e2f125efdeb66fef9926c91">initialize</a> ()</td></tr>
<tr class="separator:a70a698614e2f125efdeb66fef9926c91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0acadc1b7169d65d292d87638da409e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classmf_1_1frame__format.html">frame_format</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#aa0acadc1b7169d65d292d87638da409e">format</a> () const noexcept</td></tr>
<tr class="separator:aa0acadc1b7169d65d292d87638da409e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac29e3bd28176246284e180979d8e49ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#ac29e3bd28176246284e180979d8e49ad">capacity</a> () const </td></tr>
<tr class="memdesc:ac29e3bd28176246284e180979d8e49ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Capacity of buffer.  <a href="#ac29e3bd28176246284e180979d8e49ad">More...</a><br/></td></tr>
<tr class="separator:ac29e3bd28176246284e180979d8e49ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a808ed969aa84db40da9e0129e2d6a733"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmf_1_1shared__ring.html#a9b77e989ccd055ec19eb0a3b5f65de4d">section_view_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a808ed969aa84db40da9e0129e2d6a733">begin_write</a> (<a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> write_duration)</td></tr>
<tr class="memdesc:a808ed969aa84db40da9e0129e2d6a733"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin writing <em>write_duration</em> frames at current write start time.  <a href="#a808ed969aa84db40da9e0129e2d6a733">More...</a><br/></td></tr>
<tr class="separator:a808ed969aa84db40da9e0129e2d6a733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63754de6d5cd998ce76e60886af02eec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmf_1_1shared__ring.html#a9b77e989ccd055ec19eb0a3b5f65de4d">section_view_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a63754de6d5cd998ce76e60886af02eec">try_begin_write</a> (<a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> write_duration)</td></tr>
<tr class="memdesc:a63754de6d5cd998ce76e60886af02eec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin writing <em>write_duration</em> frames at current write start time, if they are available.  <a href="#a63754de6d5cd998ce76e60886af02eec">More...</a><br/></td></tr>
<tr class="separator:a63754de6d5cd998ce76e60886af02eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa00892283868b58f3950343bf7d5cbcb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#aa00892283868b58f3950343bf7d5cbcb">wait_writable</a> (<a class="el" href="classmf_1_1event.html">event</a> &amp;break_event)</td></tr>
<tr class="memdesc:aa00892283868b58f3950343bf7d5cbcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until a frame become writable, or <em>break_event</em> occurs.  <a href="#aa00892283868b58f3950343bf7d5cbcb">More...</a><br/></td></tr>
<tr class="separator:aa00892283868b58f3950343bf7d5cbcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac08c42caab789c59cace76fbfa8c6b8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#ac08c42caab789c59cace76fbfa8c6b8a">end_write</a> (<a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> written_duration, bool mark_end=false)</td></tr>
<tr class="memdesc:ac08c42caab789c59cace76fbfa8c6b8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">End writing <em>written_duration</em> frames.  <a href="#ac08c42caab789c59cace76fbfa8c6b8a">More...</a><br/></td></tr>
<tr class="separator:ac08c42caab789c59cace76fbfa8c6b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf03b2ecb2bb88884f2fe821c2554e35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmf_1_1shared__ring.html#a9b77e989ccd055ec19eb0a3b5f65de4d">section_view_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#acf03b2ecb2bb88884f2fe821c2554e35">begin_read_span</a> (<a class="el" href="classmf_1_1time__span.html">time_span</a>)</td></tr>
<tr class="memdesc:acf03b2ecb2bb88884f2fe821c2554e35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin reading frames at time span <em>span</em>.  <a href="#acf03b2ecb2bb88884f2fe821c2554e35">More...</a><br/></td></tr>
<tr class="separator:acf03b2ecb2bb88884f2fe821c2554e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbb18755b69d25ba833ef92826fb8529"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmf_1_1shared__ring.html#a9b77e989ccd055ec19eb0a3b5f65de4d">section_view_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#abbb18755b69d25ba833ef92826fb8529">begin_read</a> (<a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> read_duration)</td></tr>
<tr class="memdesc:abbb18755b69d25ba833ef92826fb8529"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin reading <em>read_duration</em> frames at current read start time.  <a href="#abbb18755b69d25ba833ef92826fb8529">More...</a><br/></td></tr>
<tr class="separator:abbb18755b69d25ba833ef92826fb8529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a952a0ab81b17db5800938ac42aee9b05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmf_1_1shared__ring.html#a9b77e989ccd055ec19eb0a3b5f65de4d">section_view_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a952a0ab81b17db5800938ac42aee9b05">try_begin_read</a> (<a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> read_duration)</td></tr>
<tr class="memdesc:a952a0ab81b17db5800938ac42aee9b05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin reading <em>read_duration</em> frames at current read start time, if they are available.  <a href="#a952a0ab81b17db5800938ac42aee9b05">More...</a><br/></td></tr>
<tr class="separator:a952a0ab81b17db5800938ac42aee9b05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf14c657d565863a5b5fb39e635cb7c0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#aaf14c657d565863a5b5fb39e635cb7c0">wait_readable</a> (<a class="el" href="classmf_1_1event.html">event</a> &amp;break_event)</td></tr>
<tr class="memdesc:aaf14c657d565863a5b5fb39e635cb7c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until a frame become readable, or <em>break_event</em> occurs.  <a href="#aaf14c657d565863a5b5fb39e635cb7c0">More...</a><br/></td></tr>
<tr class="separator:aaf14c657d565863a5b5fb39e635cb7c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae51bc805aa7d2dd88a2cb817854326e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#ae51bc805aa7d2dd88a2cb817854326e8">end_read</a> (<a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> read_duration)</td></tr>
<tr class="memdesc:ae51bc805aa7d2dd88a2cb817854326e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">End reading <em>read_duration</em> frames.  <a href="#ae51bc805aa7d2dd88a2cb817854326e8">More...</a><br/></td></tr>
<tr class="separator:ae51bc805aa7d2dd88a2cb817854326e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb28b03076aa988e45ffc3cca6a3f5a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#acb28b03076aa988e45ffc3cca6a3f5a4">skip</a> (<a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> skip_duration)</td></tr>
<tr class="memdesc:acb28b03076aa988e45ffc3cca6a3f5a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Skips <em>duration</em> frames.  <a href="#acb28b03076aa988e45ffc3cca6a3f5a4">More...</a><br/></td></tr>
<tr class="separator:acb28b03076aa988e45ffc3cca6a3f5a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5d8663e25f07f98bfeaa0c9985e041d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#aa5d8663e25f07f98bfeaa0c9985e041d">is_seekable</a> () const </td></tr>
<tr class="memdesc:aa5d8663e25f07f98bfeaa0c9985e041d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the ring is seekable.  <a href="#aa5d8663e25f07f98bfeaa0c9985e041d">More...</a><br/></td></tr>
<tr class="separator:aa5d8663e25f07f98bfeaa0c9985e041d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f327348388cafda6e1e24c27e6156e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a7f327348388cafda6e1e24c27e6156e9">seek</a> (<a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> target_time)</td></tr>
<tr class="memdesc:a7f327348388cafda6e1e24c27e6156e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seeks to read time <em>t</em>.  <a href="#a7f327348388cafda6e1e24c27e6156e9">More...</a><br/></td></tr>
<tr class="separator:a7f327348388cafda6e1e24c27e6156e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86bbde463f9246d7606bf26de75ba946"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a86bbde463f9246d7606bf26de75ba946">can_seek</a> (<a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> target_time) const </td></tr>
<tr class="memdesc:a86bbde463f9246d7606bf26de75ba946"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies if is is possible to seek to read time <em>t</em>.  <a href="#a86bbde463f9246d7606bf26de75ba946">More...</a><br/></td></tr>
<tr class="separator:a86bbde463f9246d7606bf26de75ba946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07059483f56d80180768e36e7246c6a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a07059483f56d80180768e36e7246c6a3">current_time</a> () const </td></tr>
<tr class="memdesc:a07059483f56d80180768e36e7246c6a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time of last written frame in buffer.  <a href="#a07059483f56d80180768e36e7246c6a3">More...</a><br/></td></tr>
<tr class="separator:a07059483f56d80180768e36e7246c6a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f34c54965fa953a4a07afcc28f08264"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a4f34c54965fa953a4a07afcc28f08264">write_start_time</a> () const </td></tr>
<tr class="memdesc:a4f34c54965fa953a4a07afcc28f08264"><td class="mdescLeft">&#160;</td><td class="mdescRight">Presumptive start time of next write.  <a href="#a4f34c54965fa953a4a07afcc28f08264">More...</a><br/></td></tr>
<tr class="separator:a4f34c54965fa953a4a07afcc28f08264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba8f2fbdf70d999a66a97e108dc9ead4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#aba8f2fbdf70d999a66a97e108dc9ead4">read_start_time</a> () const </td></tr>
<tr class="memdesc:aba8f2fbdf70d999a66a97e108dc9ead4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read start time.  <a href="#aba8f2fbdf70d999a66a97e108dc9ead4">More...</a><br/></td></tr>
<tr class="separator:aba8f2fbdf70d999a66a97e108dc9ead4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80931f609b97611ce4f8fb74cdd191c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmf_1_1time__span.html">time_span</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a80931f609b97611ce4f8fb74cdd191c4">writable_time_span</a> () const </td></tr>
<tr class="memdesc:a80931f609b97611ce4f8fb74cdd191c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently writable time span.  <a href="#a80931f609b97611ce4f8fb74cdd191c4">More...</a><br/></td></tr>
<tr class="separator:a80931f609b97611ce4f8fb74cdd191c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad22e3af4a42a9139269574ec4a36ab94"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmf_1_1time__span.html">time_span</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#ad22e3af4a42a9139269574ec4a36ab94">readable_time_span</a> () const </td></tr>
<tr class="memdesc:ad22e3af4a42a9139269574ec4a36ab94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently readable time span.  <a href="#ad22e3af4a42a9139269574ec4a36ab94">More...</a><br/></td></tr>
<tr class="separator:ad22e3af4a42a9139269574ec4a36ab94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a1590515ef051fd0f62b28875aa6968"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a9a1590515ef051fd0f62b28875aa6968">writable_duration</a> () const </td></tr>
<tr class="memdesc:a9a1590515ef051fd0f62b28875aa6968"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently writable duration.  <a href="#a9a1590515ef051fd0f62b28875aa6968">More...</a><br/></td></tr>
<tr class="separator:a9a1590515ef051fd0f62b28875aa6968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb937b2589546118964a4647bd1d8c51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#acb937b2589546118964a4647bd1d8c51">readable_duration</a> () const </td></tr>
<tr class="memdesc:acb937b2589546118964a4647bd1d8c51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently readable duration.  <a href="#acb937b2589546118964a4647bd1d8c51">More...</a><br/></td></tr>
<tr class="separator:acb937b2589546118964a4647bd1d8c51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0de07bea633fd9b14e0a74313b01282"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#ab0de07bea633fd9b14e0a74313b01282">end_time</a> () const </td></tr>
<tr class="memdesc:ab0de07bea633fd9b14e0a74313b01282"><td class="mdescLeft">&#160;</td><td class="mdescRight">End of file time. */.  <a href="#ab0de07bea633fd9b14e0a74313b01282">More...</a><br/></td></tr>
<tr class="separator:ab0de07bea633fd9b14e0a74313b01282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fdbedde81596cfc3777d70ea160a1a2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a5fdbedde81596cfc3777d70ea160a1a2">end_time_is_defined</a> () const </td></tr>
<tr class="memdesc:a5fdbedde81596cfc3777d70ea160a1a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if end of file time is known. */.  <a href="#a5fdbedde81596cfc3777d70ea160a1a2">More...</a><br/></td></tr>
<tr class="separator:a5fdbedde81596cfc3777d70ea160a1a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8f32c6d9ef806e06a3537255bfe7182"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#ab8f32c6d9ef806e06a3537255bfe7182">writer_reached_end</a> () const </td></tr>
<tr class="memdesc:ab8f32c6d9ef806e06a3537255bfe7182"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if writer has written last frame.  <a href="#ab8f32c6d9ef806e06a3537255bfe7182">More...</a><br/></td></tr>
<tr class="separator:ab8f32c6d9ef806e06a3537255bfe7182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a065e2fca77431c8449dd43e257190130"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmf_1_1shared__ring.html#a065e2fca77431c8449dd43e257190130">reader_reached_end</a> () const </td></tr>
<tr class="memdesc:a065e2fca77431c8449dd43e257190130"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if reader has read last frame.  <a href="#a065e2fca77431c8449dd43e257190130">More...</a><br/></td></tr>
<tr class="separator:a065e2fca77431c8449dd43e257190130"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Timed ring buffer with changed semantics, for dual-thread use. </p>
<p>Not derived from <a class="el" href="classmf_1_1timed__ring.html">timed_ring</a> because semantics are changed and functionality is added. Interface and implementation, and scope of functionality designed to prevent data races and deadlocks. Must be used with two threads, one reader and one writer. Added functionality compared to timed_ring:</p>
<ul>
<li>Reader and writer mutually wait until frames become readable/writable. Deadlocks are prevented.</li>
<li>Handling of end of stream.</li>
<li>Possibility to cancel waits by supplying additional break <a class="el" href="classmf_1_1event.html">event</a>. Two policies exist:</li>
<li><em>seekable</em>: Duration of stream is specified at construction and cannot be changed. Reader can <a class="el" href="classmf_1_1shared__ring.html#a7f327348388cafda6e1e24c27e6156e9" title="Seeks to read time t. ">seek()</a> to another absolute time index. Writer receives the time index at which it is supposed to write with the timed section view returned by <a class="el" href="classmf_1_1shared__ring.html#a808ed969aa84db40da9e0129e2d6a733" title="Begin writing write_duration frames at current write start time. ">begin_write()</a>. That is, the values it received from <a class="el" href="classmf_1_1shared__ring.html#a4f34c54965fa953a4a07afcc28f08264" title="Presumptive start time of next write. ">write_start_time()</a> can change during <a class="el" href="classmf_1_1shared__ring.html#a808ed969aa84db40da9e0129e2d6a733" title="Begin writing write_duration frames at current write start time. ">begin_write()</a> call.</li>
<li><em>non-seekable</em>: <a class="el" href="classmf_1_1shared__ring.html#a7f327348388cafda6e1e24c27e6156e9" title="Seeks to read time t. ">seek()</a> is not allowed. Reading at absolute time index in future instead skips intermediate frames. Can skip more frames that buffer capacity (in which case buffer gets repeatedly filled and discarded). Stream duration need not be specified at construction, and can remain undeterminate. Writer can mark end in <code><a class="el" href="classmf_1_1shared__ring.html#ac08c42caab789c59cace76fbfa8c6b8a" title="End writing written_duration frames. ">end_write()</a></code>, when it wrote at least 1 frame. Reader responds by not waiting for any more frames, even if at start of <code><a class="el" href="classmf_1_1shared__ring.html#abbb18755b69d25ba833ef92826fb8529" title="Begin reading read_duration frames at current read start time. ">begin_read()</a></code>, duration was not yet known. </li>
</ul>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a9b77e989ccd055ec19eb0a3b5f65de4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classmf_1_1shared__ring.html#a9b77e989ccd055ec19eb0a3b5f65de4d">mf::shared_ring::section_view_type</a> =  <a class="el" href="classmf_1_1timed__ring.html#affa5b146c4b4100f18c9b684686c1a47">timed_ring::section_view_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac185295e24497ff233d58d49c955c5b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mf::shared_ring::shared_ring </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacemf.html#ad2056866238211e432bebeb2ebed1fc7">frame_array_properties</a> &amp;&#160;</td>
          <td class="paramname"><em>prop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>seekable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td>
          <td class="paramname"><em>end_time</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="abbb18755b69d25ba833ef92826fb8529"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto mf::shared_ring::begin_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td>
          <td class="paramname"><em>read_duration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Begin reading <em>read_duration</em> frames at current read start time. </p>
<p>If span to read crosses end of buffer, it is truncated. When already at end, zero-length section is returned. Then <a class="el" href="classmf_1_1shared__ring.html#ae51bc805aa7d2dd88a2cb817854326e8" title="End reading read_duration frames. ">end_read()</a> must not be called. Waits until <em>read_duration</em> (after truncation) frames become readable. For non-seekable buffer only: end may be marked while waiting, and so returned section may be truncated even if end time was not defined prior to call. Returns section for writer to read from, with time information. Reader may also freely write into the returned section. Must be called from single reader thread only, and followed by call to <a class="el" href="classmf_1_1shared__ring.html#ae51bc805aa7d2dd88a2cb817854326e8" title="End reading read_duration frames. ">end_read()</a>. </p>

</div>
</div>
<a class="anchor" id="acf03b2ecb2bb88884f2fe821c2554e35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto mf::shared_ring::begin_read_span </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmf_1_1time__span.html">time_span</a>&#160;</td>
          <td class="paramname"><em>span</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Begin reading frames at time span <em>span</em>. </p>
<p>If <em>span</em> does not start at <code><a class="el" href="classmf_1_1shared__ring.html#ad22e3af4a42a9139269574ec4a36ab94" title="Currently readable time span. ">readable_time_span()</a>.start_time()</code>, seeks to <code>span.start_time()</code> first. Then behaves as <code>begin_read(span.duration())</code>. </p>

</div>
</div>
<a class="anchor" id="a808ed969aa84db40da9e0129e2d6a733"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto mf::shared_ring::begin_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td>
          <td class="paramname"><em>write_duration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Begin writing <em>write_duration</em> frames at current write start time. </p>
<p>If span to write crosses end of buffer, it is truncated. For seekable buffer only: returned section may have start time different to <code><a class="el" href="classmf_1_1shared__ring.html#a80931f609b97611ce4f8fb74cdd191c4" title="Currently writable time span. ">writable_time_span()</a>.start_time()</code> when reader seeked to another time inbetween. When at end (already before, or following wait and seek), zero-length section is returned, and start time of returned time span equals <code><a class="el" href="classmf_1_1shared__ring.html#ab0de07bea633fd9b14e0a74313b01282" title="End of file time. */. ">end_time()</a></code>. Then <a class="el" href="classmf_1_1shared__ring.html#ac08c42caab789c59cace76fbfa8c6b8a" title="End writing written_duration frames. ">end_write()</a> must not be called. Waits until <em>write_duration</em> (after truncation) frames become writable. Returns section for writer to write into, with time information. Must be called from single writer thread only, and followed by call to <a class="el" href="classmf_1_1shared__ring.html#ac08c42caab789c59cace76fbfa8c6b8a" title="End writing written_duration frames. ">end_write()</a>. </p>

</div>
</div>
<a class="anchor" id="a86bbde463f9246d7606bf26de75ba946"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mf::shared_ring::can_seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td>
          <td class="paramname"><em>target_time</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verifies if is is possible to seek to read time <em>t</em>. </p>
<p>Returns false when buffer is not seekable, or when time is out of bounds. </p>

</div>
</div>
<a class="anchor" id="ac29e3bd28176246284e180979d8e49ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> mf::shared_ring::capacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Capacity of buffer. </p>
<p>Maximal readable and writable frames that fit in buffer. </p>

</div>
</div>
<a class="anchor" id="a07059483f56d80180768e36e7246c6a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> mf::shared_ring::current_time </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Time of last written frame in buffer. </p>
<p>Equivalent to <code><a class="el" href="classmf_1_1shared__ring.html#a4f34c54965fa953a4a07afcc28f08264" title="Presumptive start time of next write. ">write_start_time()</a> - 1</code>. -1 in initial state. </p>

</div>
</div>
<a class="anchor" id="ae51bc805aa7d2dd88a2cb817854326e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mf::shared_ring::end_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td>
          <td class="paramname"><em>read_duration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>End reading <em>read_duration</em> frames. </p>
<p>Must be called after <a class="el" href="classmf_1_1shared__ring.html#abbb18755b69d25ba833ef92826fb8529" title="Begin reading read_duration frames at current read start time. ">begin_read()</a> or <a class="el" href="classmf_1_1shared__ring.html#acf03b2ecb2bb88884f2fe821c2554e35" title="Begin reading frames at time span span. ">begin_read_span()</a>. <em>read_duration</em> must be lesser of equal to duration of section returned by that function. </p>

</div>
</div>
<a class="anchor" id="ab0de07bea633fd9b14e0a74313b01282"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> mf::shared_ring::end_time </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>End of file time. */. </p>
<p>Returns -1 if not defined. For non-seekable buffer, reader must not rely on this value because it can change between <a class="el" href="classmf_1_1shared__ring.html#ab0de07bea633fd9b14e0a74313b01282" title="End of file time. */. ">end_time()</a> call and <a class="el" href="classmf_1_1shared__ring.html#abbb18755b69d25ba833ef92826fb8529" title="Begin reading read_duration frames at current read start time. ">begin_read()</a> call. </p>

</div>
</div>
<a class="anchor" id="a5fdbedde81596cfc3777d70ea160a1a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mf::shared_ring::end_time_is_defined </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if end of file time is known. */. </p>

</div>
</div>
<a class="anchor" id="ac08c42caab789c59cace76fbfa8c6b8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mf::shared_ring::end_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td>
          <td class="paramname"><em>written_duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>mark_end</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>End writing <em>written_duration</em> frames. </p>
<p>Must be called after <a class="el" href="classmf_1_1shared__ring.html#a808ed969aa84db40da9e0129e2d6a733" title="Begin writing write_duration frames at current write start time. ">begin_write()</a>. <em>written_duration</em> must be lesser of equal to duration of section returned by <a class="el" href="classmf_1_1shared__ring.html#a808ed969aa84db40da9e0129e2d6a733" title="Begin writing write_duration frames at current write start time. ">begin_write()</a>. For non-seekable buffer, <em>mark_end</em> is used to mark this written frame(s) as last. <em>mark_end</em> cannot be set when <em>written_duration</em> is zero. The reader cannot seek to other position inbetween <a class="el" href="classmf_1_1shared__ring.html#a808ed969aa84db40da9e0129e2d6a733" title="Begin writing write_duration frames at current write start time. ">begin_write()</a> and <a class="el" href="classmf_1_1shared__ring.html#ac08c42caab789c59cace76fbfa8c6b8a" title="End writing written_duration frames. ">end_write()</a> calls of writer. </p>

</div>
</div>
<a class="anchor" id="aa0acadc1b7169d65d292d87638da409e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classmf_1_1frame__format.html">frame_format</a>&amp; mf::shared_ring::format </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a70a698614e2f125efdeb66fef9926c91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mf::shared_ring::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa5d8663e25f07f98bfeaa0c9985e041d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mf::shared_ring::is_seekable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the ring is seekable. </p>
<p>As specified in construction. </p>

</div>
</div>
<a class="anchor" id="aba8f2fbdf70d999a66a97e108dc9ead4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> mf::shared_ring::read_start_time </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read start time. </p>
<p>Value gets changed by reader. Start time of view returned by <a class="el" href="classmf_1_1shared__ring.html#abbb18755b69d25ba833ef92826fb8529" title="Begin reading read_duration frames at current read start time. ">begin_read()</a>, unless reader seeks to another frame. </p>

</div>
</div>
<a class="anchor" id="acb937b2589546118964a4647bd1d8c51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> mf::shared_ring::readable_duration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Currently readable duration. </p>
<p>Equivalent to <code><a class="el" href="classmf_1_1shared__ring.html#ad22e3af4a42a9139269574ec4a36ab94" title="Currently readable time span. ">readable_time_span()</a>.duration()</code>. </p>

</div>
</div>
<a class="anchor" id="ad22e3af4a42a9139269574ec4a36ab94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmf_1_1time__span.html">time_span</a> mf::shared_ring::readable_time_span </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Currently readable time span. </p>
<p>Span starting from <a class="el" href="classmf_1_1shared__ring.html#aba8f2fbdf70d999a66a97e108dc9ead4" title="Read start time. ">read_start_time()</a>, going until end of <em>currently</em> readable span, or end of stream, whichever comes earlier. That is, reader can wait for more than this span in former case. Span is fetched atomically. </p>

</div>
</div>
<a class="anchor" id="a065e2fca77431c8449dd43e257190130"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mf::shared_ring::reader_reached_end </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>True if reader has read last frame. </p>
<p>Unlike <a class="el" href="classmf_1_1shared__ring.html#ab0de07bea633fd9b14e0a74313b01282" title="End of file time. */. ">end_time()</a>, the result cannot change between <a class="el" href="classmf_1_1shared__ring.html#a065e2fca77431c8449dd43e257190130" title="True if reader has read last frame. ">reader_reached_end()</a> and <a class="el" href="classmf_1_1shared__ring.html#abbb18755b69d25ba833ef92826fb8529" title="Begin reading read_duration frames at current read start time. ">begin_read()</a> call: for non-seekable buffer, the writer can only mark end after writing at least one frame, and hence cannot retroactively mark current read start position as being the end. </p>

</div>
</div>
<a class="anchor" id="a7f327348388cafda6e1e24c27e6156e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mf::shared_ring::seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td>
          <td class="paramname"><em>target_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Seeks to read time <em>t</em>. </p>
<p>Can only be called on seekable buffer. Must be called from single reader thread only. Sets read start position to absolute time <em>t</em>, producing internal discontinuity in buffer. Change is signalled to writer by the section returned by <code><a class="el" href="classmf_1_1shared__ring.html#a808ed969aa84db40da9e0129e2d6a733" title="Begin writing write_duration frames at current write start time. ">begin_write()</a></code>, and writer must react by writing frames for that time. </p>

</div>
</div>
<a class="anchor" id="acb28b03076aa988e45ffc3cca6a3f5a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mf::shared_ring::skip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td>
          <td class="paramname"><em>skip_duration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Skips <em>duration</em> frames. </p>
<p>If span to skip crosses end of buffer, it is truncated, and skips to end of file. <em>duration</em> can be larger than buffer capacity. For non-seekable buffer, reads and discards <em>duration</em> frames, possibly letting writer fill up buffer multiple times. For seekable buffer, equivalent to <code>seek(<a class="el" href="classmf_1_1shared__ring.html#aba8f2fbdf70d999a66a97e108dc9ead4" title="Read start time. ">read_start_time()</a> + duration)</code>. Must be called from single reader thread only. </p>

</div>
</div>
<a class="anchor" id="a952a0ab81b17db5800938ac42aee9b05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto mf::shared_ring::try_begin_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td>
          <td class="paramname"><em>read_duration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Begin reading <em>read_duration</em> frames at current read start time, if they are available. </p>
<p>Like <a class="el" href="classmf_1_1shared__ring.html#abbb18755b69d25ba833ef92826fb8529" title="Begin reading read_duration frames at current read start time. ">begin_read()</a>, but never waits. Instead returns null view when the frames are not available. </p>

</div>
</div>
<a class="anchor" id="a63754de6d5cd998ce76e60886af02eec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto mf::shared_ring::try_begin_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a>&#160;</td>
          <td class="paramname"><em>write_duration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Begin writing <em>write_duration</em> frames at current write start time, if they are available. </p>
<p>Like <a class="el" href="classmf_1_1shared__ring.html#a808ed969aa84db40da9e0129e2d6a733" title="Begin writing write_duration frames at current write start time. ">begin_write()</a>, but never waits. Instead returns null view when the frames are not available. </p>

</div>
</div>
<a class="anchor" id="aaf14c657d565863a5b5fb39e635cb7c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mf::shared_ring::wait_readable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmf_1_1event.html">event</a> &amp;&#160;</td>
          <td class="paramname"><em>break_event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait until a frame become readable, or <em>break_event</em> occurs. </p>
<p>If no frame is readable (either because writer has not written enough frames from the ring buffer yet or read start time is at end), waits until at least one frame becomes available, or <em>break_event</em> occurs. If <em>break_event</em> occured, returns false. Otherwise, repeats until at least one frames is readable. Also waits if write start position is at end time, until <em>break_event</em> occurs. </p>

</div>
</div>
<a class="anchor" id="aa00892283868b58f3950343bf7d5cbcb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mf::shared_ring::wait_writable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmf_1_1event.html">event</a> &amp;&#160;</td>
          <td class="paramname"><em>break_event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait until a frame become writable, or <em>break_event</em> occurs. </p>
<p>If no frame is writable (either because reader has not read enough frames from the ring buffer yet or write start time is at end), waits until at least one frame becomes available, or <em>break_event</em> occurs. If <em>break_event</em> occured, returns false. Otherwise, repeats until at least one frames is writable. Also waits if write start position is at end time, until seek occurs or <em>break_event</em> occurs. </p>

</div>
</div>
<a class="anchor" id="a9a1590515ef051fd0f62b28875aa6968"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> mf::shared_ring::writable_duration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Currently writable duration. </p>
<p>Equivalent to <code><a class="el" href="classmf_1_1shared__ring.html#a80931f609b97611ce4f8fb74cdd191c4" title="Currently writable time span. ">writable_time_span()</a>.duration()</code>. </p>

</div>
</div>
<a class="anchor" id="a80931f609b97611ce4f8fb74cdd191c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmf_1_1time__span.html">time_span</a> mf::shared_ring::writable_time_span </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Currently writable time span. </p>
<p>Span starting from <a class="el" href="classmf_1_1shared__ring.html#a4f34c54965fa953a4a07afcc28f08264" title="Presumptive start time of next write. ">write_start_time()</a>, going until end of <em>currently</em> writable span, or end of stream, whichever comes earlier. That is, writer can wait for more than this span in former case. Span is fetched atomically. </p>

</div>
</div>
<a class="anchor" id="a4f34c54965fa953a4a07afcc28f08264"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemf.html#a6dd749558a6bf04aaf432b327d238407">time_unit</a> mf::shared_ring::write_start_time </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Presumptive start time of next write. </p>
<p>Value gets changed by writer. For seekable policy, if can also be changed by reader, including during a <a class="el" href="classmf_1_1shared__ring.html#a808ed969aa84db40da9e0129e2d6a733" title="Begin writing write_duration frames at current write start time. ">begin_write()</a> call while writer is waiting. Writer must always use start time of span returned by <a class="el" href="classmf_1_1shared__ring.html#a808ed969aa84db40da9e0129e2d6a733" title="Begin writing write_duration frames at current write start time. ">begin_write()</a> of <a class="el" href="classmf_1_1shared__ring.html#a63754de6d5cd998ce76e60886af02eec" title="Begin writing write_duration frames at current write start time, if they are available. ">try_begin_write()</a> instead. </p>

</div>
</div>
<a class="anchor" id="ab8f32c6d9ef806e06a3537255bfe7182"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mf::shared_ring::writer_reached_end </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>True if writer has written last frame. </p>
<p>For non-seekable buffer, true after <a class="el" href="classmf_1_1shared__ring.html#ac08c42caab789c59cace76fbfa8c6b8a" title="End writing written_duration frames. ">end_write()</a> call with mark end. <a class="el" href="classmf_1_1shared__ring.html#a808ed969aa84db40da9e0129e2d6a733" title="Begin writing write_duration frames at current write start time. ">begin_write()</a> returns empty view if called after this returned true. (Except if seek occured inbetween). </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/queue/<a class="el" href="shared__ring_8h_source.html">shared_ring.h</a></li>
<li>src/queue/<a class="el" href="shared__ring_8cc.html">shared_ring.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
